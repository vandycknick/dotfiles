---
- name: Kill System Preferences Window
  # Close any open System Preferences panes, to prevent them from overriding
  # settings weâ€™re about to change
  shell: osascript -e 'tell application "System Preferences" to quit'

- include_tasks: defaults/ui-and-ux.yml

- include_tasks: defaults/screen.yml

- include_tasks: defaults/finder.yml

- include_tasks: defaults/dock-and-dash.yml

- include_tasks: defaults/photos.yml

- include_tasks: defaults/iterm2.yml

- include_tasks: defaults/amethyst.yml

- name: Restart apps
  shell: |
    for app in "Activity Monitor" \
        "Address Book" \
        "Calendar" \
        "cfprefsd" \
        "Contacts" \
        "Dock" \
        "Finder" \
        "Photos" \
        "Safari" \
        "SystemUIServer" \
        "iCal"; do
        killall "${app}" &>/dev/null
    done
    exit 0
